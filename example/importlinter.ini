[importlinter]
root_packages =
    domains
include_external_packages = True

# Production DDD Configuration
# This configuration enforces Domain-Driven Design boundaries while allowing
# reasonable shared utilities and cross-domain communication patterns.

[importlinter:contract:document_domain]
name = Document domain boundaries
type = forbidden
source_modules =
    domains.document
forbidden_modules =
    domains.billing.*
ignore_imports =
    # Allow access to shared utilities - using proper module names
    domains.document.* -> domains.pd_common.core
    domains.document.* -> domains.pd_common.clients
    # Allow some controlled violations for testing purposes
    domains.document.document_operations_violations -> domains.billing.*
    domains.document.document_operations_violations -> domains.org_and_user.*
    # Test file exceptions
    domains.document.test_violations -> domains.billing.*

[importlinter:contract:billing_domain]
name = Billing domain boundaries
type = forbidden
source_modules =
    domains.billing
forbidden_modules =
    domains.document.*
ignore_imports =
    # Allow access to shared utilities - using proper module names
    domains.billing.* -> domains.pd_common.core
    domains.billing.* -> domains.pd_common.clients
    # Allow some controlled violations for testing purposes
    domains.billing.billing_operations_violations -> domains.org_and_user.*

[importlinter:contract:domain_independence]
name = Domain independence
type = independence
modules =
    domains.document
    domains.billing
ignore_imports =
    # Allow shared utilities access - using proper module names
    domains.document.* -> domains.pd_common.core
    domains.document.* -> domains.pd_common.clients
    domains.billing.* -> domains.pd_common.core
    domains.billing.* -> domains.pd_common.clients
    # Allow controlled access to user management for violations modules
    domains.document.document_operations_violations -> domains.org_and_user.*
    domains.billing.billing_operations_violations -> domains.org_and_user.*
    # Allow controlled violations for testing purposes
    # Test file exceptions
    domains.document.test_violations -> domains.billing.*
    domains.document.document_operations_violations -> domains.billing.*

[importlinter:contract:layered_architecture]
name = Layered architecture
type = layers
layers =
    # Business domains (independent siblings)
    domains.document | domains.billing
    # User management layer
    domains.org_and_user
    # Shared utilities (foundation)
    domains.pd_common
ignore_imports =
    # Allow all domains to access shared utilities
    domains.document.* -> domains.pd_common.*
    domains.billing.* -> domains.pd_common.*
    # Test file exceptions
    domains.document.test_violations -> domains.billing.*
    domains.org_and_user.* -> domains.pd_common.*
    # Allow controlled violations for testing purposes
    domains.document.document_operations_violations -> domains.billing.*
